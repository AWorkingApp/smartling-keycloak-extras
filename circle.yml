machine:
  environment:
    LANG: en_US.UTF-8
  java:
    version: oraclejdk7

dependencies:
  cache_directories:
    - keycloak-1.2.1.Smartling-SNAPSHOT
    - ../.gradle/wrapper/dists
  pre:
    - bash ./install-keycloak.sh

test:
  override:
    - ./gradlew test

deployment:
  snapshot:
    branch: develop
    commands:
      - ./gradlew clean
  release:
    branch: master
    commands:
      - rm -f gradle.properties
      - ./gradlew -Prelease=true -PbintrayUser=${BINTRAY_USER} -PbintrayKey=${BINTRAY_API_KEY} clean bintrayUpload
